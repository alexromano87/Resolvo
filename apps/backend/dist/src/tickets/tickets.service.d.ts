import { Repository } from 'typeorm';
import { Ticket } from './ticket.entity';
import { CreateTicketDto } from './dto/create-ticket.dto';
import { UpdateTicketDto } from './dto/update-ticket.dto';
import { AddMessaggioDto } from './dto/add-messaggio.dto';
import { Studio } from '../studi/studio.entity';
import { Pratica } from '../pratiche/pratica.entity';
import { Avvocato } from '../avvocati/avvocato.entity';
import { EmailService } from '../notifications/email.service';
import { NotificationsService } from '../notifications/notifications.service';
import { AlertsService } from '../alerts/alerts.service';
import type { CurrentUserData } from '../auth/current-user.decorator';
import { type PaginationOptions } from '../common/pagination';
export declare class TicketsService {
    private ticketRepository;
    private praticaRepository;
    private studioRepository;
    private avvocatiRepository;
    private readonly emailService;
    private readonly notificationsService;
    private readonly alertsService;
    constructor(ticketRepository: Repository<Ticket>, praticaRepository: Repository<Pratica>, studioRepository: Repository<Studio>, avvocatiRepository: Repository<Avvocato>, emailService: EmailService, notificationsService: NotificationsService, alertsService: AlertsService);
    create(createTicketDto: CreateTicketDto): Promise<Ticket>;
    createForUser(user: CurrentUserData, createTicketDto: CreateTicketDto): Promise<Ticket>;
    findAll(includeInactive?: boolean, studioId?: string, pagination?: PaginationOptions): Promise<Ticket[]>;
    findAllForUser(user: CurrentUserData, includeInactive?: boolean, pagination?: PaginationOptions): Promise<Ticket[]>;
    findAllByPratica(praticaId: string, includeInactive?: boolean, pagination?: PaginationOptions): Promise<Ticket[]>;
    findAllByPraticaForUser(praticaId: string, user: CurrentUserData, includeInactive?: boolean, pagination?: PaginationOptions): Promise<Ticket[]>;
    findAllByStato(stato: 'aperto' | 'in_gestione' | 'chiuso', includeInactive?: boolean, pagination?: PaginationOptions): Promise<Ticket[]>;
    findAllByStatoForUser(stato: 'aperto' | 'in_gestione' | 'chiuso', user: CurrentUserData, includeInactive?: boolean, pagination?: PaginationOptions): Promise<Ticket[]>;
    findOne(id: string): Promise<Ticket>;
    findOneForUser(id: string, user: CurrentUserData): Promise<Ticket>;
    update(id: string, updateTicketDto: UpdateTicketDto, user?: CurrentUserData): Promise<Ticket>;
    deactivate(id: string, user?: CurrentUserData): Promise<Ticket>;
    reactivate(id: string, user?: CurrentUserData): Promise<Ticket>;
    remove(id: string, user?: CurrentUserData): Promise<void>;
    addMessaggio(id: string, addMessaggioDto: AddMessaggioDto, user?: CurrentUserData): Promise<Ticket>;
    chiudiTicket(id: string, user?: CurrentUserData): Promise<Ticket>;
    prendiInCarico(id: string, user?: CurrentUserData): Promise<Ticket>;
    riapriTicket(id: string, user?: CurrentUserData): Promise<Ticket>;
    private isValidStatusTransition;
    private sendTicketEmail;
    private triggerTicketAlert;
    private applyAccessFilter;
    private canAvvocatoSeeAll;
}
